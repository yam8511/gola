<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
    <title>çŠ¯äººåœ¨è·³èˆ</title>

    <!-- <script data-ad-client="ca-pub-5823049391292672" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> -->
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "pub-5823049391292672",
            enable_page_level_ads: true
        });
    </script>

    <style>
        * {
            -moz-user-select: none;
            /* for Firefox */
            -webkit-user-select: none;
            /* for Chrome */
            user-select: none;
        }

        input,
        textarea {
            -moz-user-select: initial;
            /* for Firefox */
            -webkit-user-select: initial;
            /* for Chrome */
            user-select: initial;
        }
    </style>

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</head>

<body>
    <div id="app" class="container">
        <div class="fixed-action-btn">
            <a class="btn-floating btn-large teal">
                <div v-if="initializing" class="preloader-wrapper small active">
                    <div class="spinner-layer spinner-yellow-only">
                        <div class="circle-clipper left">
                            <div class="circle"></div>
                        </div>
                        <div class="gap-patch">
                            <div class="circle"></div>
                        </div>
                        <div class="circle-clipper right">
                            <div class="circle"></div>
                        </div>
                    </div>
                </div>
                <i v-else class="large material-icons">translate</i>
            </a>
            <ul>
                <li v-for="v in voices">
                    <a v-if="v.lang === voice.lang" class="btn-floating purple lighten-2 btn-large">{{ v.text }}</a>
                    <a v-else class="btn-floating teal lighten-2 btn-large" @mousedown="changeLang(v)">{{ v.text }}</a>
                </li>
            </ul>
        </div>

        <!-- Modal Structure -->
        <div id="modal1" class="modal bottom-sheet">
            <div class="modal-content">
                <div v-if="!chatDone">
                    <div class="input-field">
                        <i class="material-icons prefix">email</i>
                        <input id="icon_prefix" type="text" v-model="userEmail">
                        <label for="icon_prefix">ï¼¥ï½ï½ï½‰ï½Œ (å¯èƒ½æœƒå›è¦†çµ¦æ‚¨å”·)</label>
                    </div>
                    <div class="input-field">
                        <i class="material-icons prefix">chat</i>
                        <textarea id="icon_prefix2" class="materialize-textarea" v-model="suggest"></textarea>
                        <label for="icon_prefix2">æœ‰è©±è¦èªªå—~ æ­¡è¿æŒ‡æ•™èˆ‡è©•åƒ¹</label>
                    </div>
                </div>
                <div v-else-if="chatOK">
                    <i class="material-icons small">child_care</i> æ„Ÿè¬æ‚¨çš„å›é¥‹~
                </div>
                <div v-else>
                    <i class="material-icons small">nature_people</i> é€šçŸ¥å¤±æ•—ï¼Œè«‹ç¨å¾Œé‡è©¦ã€‚æˆ–è€…ä½œè€…æ­£åœ¨è¶•ä¿®ä¸­
                </div>
                <div v-if="chatting && !chatDone" class="progress">
                    <div class="indeterminate"></div>
                </div>
            </div>
            <div class="modal-footer">
                <a v-if="!chatDone" class="waves-effect waves-light btn" @mousedown="chat()" :disabled="chatting">
                    <i class="material-icons left">send</i>
                    å¿«é»çµ¦ä½œè€…
                </a>
                <a v-else-if="chatOK" class="waves-effect waves-light btn cyan accent-1 black-text">
                    <i class="material-icons left">done_all</i>
                    å·²é€šçŸ¥çµ¦ä½œè€…
                </a>
                <a v-else class="waves-effect waves-light btn red accent-1 black-text">
                    <i class="material-icons left">battery_alert</i>
                    ç¨å€™é‡è©¦
                </a>
            </div>
        </div>

        <div class="row">
            <div class="col s12">
                <h4><a href="/cd">çŠ¯äººåœ¨è·³èˆğŸ’ƒğŸ•º</a></h4>
                <h5>
                    <i v-if="is_mute" style="cursor: pointer;" class="material-icons z-depth-2"
                        @mousedown="changeMute()">volume_off</i>
                    <i v-else style="cursor: pointer;" class="material-icons z-depth-2"
                        @mousedown="changeMute()">volume_up</i>
                </h5>
            </div>

            <div class="col s12">
                <!-- é¡¯ç¤ºè¼¸å‡º -->
                <div v-if="output !== ''">
                    <p>{{ output }}</p>
                </div>

                <div v-if="gameOver">
                    <button class="waves-effect waves-light btn" @mousedown="finishGame">
                        <i class="material-icons small">check</i>éŠæˆ²çµæŸ
                    </button>
                </div>

            </div>

            <div v-if="ws === null && !gameOver" class="input-field col s12">
                <input id="token" class="validate" type="text" v-model="token" :autofocus="this.token !== ''" />
                <label for="token">è«‹è¼¸å…¥ä»»æ„è‹±æ–‡æ•¸å­—, æˆ–ç›´æ¥åŠ å…¥éŠæˆ²</label>

                <button class="waves-effect waves-light btn cyan darken-1" @mousedown="joinGame()">åŠ å…¥éŠæˆ²</button>
                <button data-target="modal1"
                    class="modal-trigger waves-effect waves-light btn red darken-1">æœ‰è©±è¦è·Ÿä½œè€…èªª</button>
                <br />

                <qrcode :value="homeQRCode" :options="{ width: 200 }" />
                </qrcode>
            </div>

            <div v-else class="col s12">
                <!-- é¡¯ç¤ºsessionè¼¸å…¥ -->
                <div v-if="needEnterSession" class="input-field">
                    <div class="input-field">
                        <input id="myName" class="validate" type="text" v-model="myName" />
                        <label for="myName">è¼¸å…¥æš±ç¨±...</label>
                    </div>
                    <input id="session" class="validate" type="text" v-model="session" />
                    <label for="session">è¼¸å…¥è™Ÿç¢¼...</label>

                    <button class="waves-effect waves-light btn cyan darken-1" @mousedown="joinGame()">åŠ å…¥éŠæˆ²</button>
                </div>

                <!-- é¡¯ç¤ºå¡ç‰Œè¨­å®š -->
                <div v-if="showSetup">
                    <h5>å¿«é€Ÿè¨­å®š</h5>
                    <label v-for="k,i in combine">
                        <input name="combine-value" class="with-gap" type="radio" :value="k"
                            v-model="selectedCombine" />
                        <span>{{ combineSetup[k].CombineName }}</span>
                        <br v-if="i%5==4" />
                    </label>
                    <div class="divider"></div>

                    <div class="row">

                        <div class="input-field col s12">
                            <div class="switch">
                                <p>é€²éšæ¨¡å¼</p>
                                <label>
                                    é—œ
                                    <input type="checkbox" v-model="advanced">
                                    <span class="lever"></span>
                                    é–‹
                                </label>
                            </div>
                        </div>

                        <div class="col s12">
                            <span for="targetPoint">ç²å‹åˆ†æ•¸</span>
                            <input name="targetPoint" type="number" min="0" v-model="targetPoint" />
                        </div>


                        <div class="range-field col s12">
                            äººæ•¸: {{ playerCount }}
                            <input name="playerCount" type="range" min="3" max="8" v-model="playerCount">
                        </div>

                    </div>

                    <div class="divider"></div>
                    <br />

                    <div class="row">
                        <div class="col s6">ç¬¬ä¸€ç™¼ç¾è€…: 1</div>
                        <div class="col s6">éš¨æ©Ÿ: {{ selectedCards['éš¨æ©Ÿ'] }}</div>
                    </div>

                    <div class="row">
                        <div v-for="count,name in basicCard" class="range-field col s6"
                            v-if="name !== 'ç¬¬ä¸€ç™¼ç¾è€…' && name !== 'éš¨æ©Ÿ'">
                            {{name}}: {{ isNaN(selectedCards[name]) ? 0 : selectedCards[name] }}
                            <input name="playerCount" type="range" min="0" :max="count" :id="name"
                                :value="isNaN(selectedCards[name]) ? 0 : selectedCards[name]" @change="changeSetup"
                                @keyup="changeSetup">
                        </div>
                    </div>

                    <button class="waves-effect waves-light btn-small" @mousedown="sendGame()">é–‹å§‹è¨­ç½®</button>
                </div>

                <!-- ç­‰å¾…ç¢ºèª -->
                <qrcode v-if="shareToken" :value="qrcode" :options="{ width: 200 }"></qrcode>
                <div v-if="isWaiting" class="row">
                    <div v-for="v,k in waitingOptions" :class="'col s' + optionsCol">
                        <a class="btn pulse" @mousedown="selectOptions(k, v)">{{ k }}</a>
                    </div>
                </div>

                <!-- é¡¯ç¤ºé¸æ“‡è™Ÿç¢¼ -->
                <div v-if="showNumber">
                    <div class="divider"></div>
                    <div v-if="showNameInput" class="input-field">
                        <input id="myName" class="validate" type="text" v-model="myName" />
                        <label for="myName">è¼¸å…¥æš±ç¨±...</label>
                    </div>
                    <div class="row">
                        <div v-for="n in numbers" :class="'col s' + parseInt(12 / numbers.length)">
                            <a class="btn pulse" @mousedown="selectNumber(n)">{{ n }}</a>
                        </div>
                    </div>
                </div>

                <!-- é¡¯ç¤ºçµç®— -->
                <div v-if="ShowResult">
                    <ul class="collection with-header">
                        <li class="collection-header">
                            <h5>{{ GameResult }} çµç®—åˆ†æ•¸</5>
                        </li>
                        <li class="collection-item" v-for="name,i in PlayerName">
                            {{ name }}çš„åˆ†æ•¸: {{ PlayerPoint[i] - PointChanged[i] }} + ({{ PointChanged[i] }}) =
                            {{ PlayerPoint[i] }}
                        </li>
                    </ul>
                </div>

                <!-- é¡¯ç¤ºå‡ºç‰Œ -->
                <div class="card blue lighten-4" v-if="showPlayCard">
                    <h4>{{ PlayPlayerName }} å‡ºç‰Œ</h4>
                    <div class="card-content">
                        <span class="card-title">{{ PlayCard.Name }}</span>
                        <span class="card-content" v-html="PlayCard.Detail"></span>
                    </div>
                </div>

                <!-- é¡¯ç¤ºæ‹¿åˆ°çš„ç‰Œ -->
                <div class="card purple lighten-4" v-if="showTakeCard">
                    <div v-if="GetCard === null">
                        <h4>ä½ æ²’æœ‰æ‹¿åˆ°æ‰‹ç‰Œ</h4>
                    </div>
                    <div v-else>
                        <h4>ä½ æ‹¿åˆ°æ‰‹ç‰Œ</h4>
                        <div class="card-content">
                            <span class="card-title">{{ GetCard.Name }}</span>
                            <span class="card-content" v-html="GetCard.Detail"></span>
                        </div>
                    </div>
                </div>

                <!-- é¡¯ç¤ºæ‹¿åˆ°çš„ç‰Œ -->
                <div class="card red lighten-4" v-if="showDrawedCard">
                    <div v-if="DrawedCard === null">
                        <h4>ä½ æ²’æœ‰è¢«æŠ½èµ°æ‰‹ç‰Œ</h4>
                    </div>
                    <div v-else>
                        <h4>è¢«æŠ½èµ°çš„æ‰‹ç‰Œ</h4>
                        <div class="card-content">
                            <span class="card-title">{{ DrawedCard.Name }}</span>
                            <span class="card-content" v-html="DrawedCard.Detail"></span>
                        </div>
                    </div>
                </div>

                <!-- é¡¯ç¤ºå…¶ä»–äººæ‰‹ç‰Œ -->
                <div class="row" v-if="showOtherCard">
                    <div v-for="name in otherCard" class="col s12 m6 card yellow darken-1">
                        <div class="card-content">
                            <span class="card-title">{{ name }}</span>
                            <span class="card-content"> </span>
                        </div>
                    </div>
                </div>

                <!-- é¡¯ç¤ºæŠ½ç‰Œ -->
                <div class="row" v-if="needDrawCard">
                    <div v-for="i in drawCard" class="col s12 m6 card yellow darken-1">
                        <div class="card-content">
                            <span class="card-title"> {{ i + 1 }}</span>
                            <span class="card-content"> </span>
                        </div>
                        <div class="card-action">
                            <a class="btn" @mousedown="playCard(i)">æŠ½é€™å¼µ</a>
                        </div>
                    </div>
                </div>

                <!-- é¡¯ç¤ºæ¡Œé¢ -->
                <div v-if="gameStart" class="row">
                    <!-- å…ˆé¡¯ç¤ºè‡ªå·±çš„ç‰Œçµ„ -->
                    <div class="col s12 m6">
                        <ul class="collection with-header">
                            <li class="collection-header">
                                <h5>#{{no}} : {{ PlayerName[no] }} ({{ PlayerPoint[no] }}åˆ†)</h5>
                            </li>
                            <li class="collection-item">
                                <div class="row">
                                    <div class="col s12 card yellow darken-1" v-for="card in MyCard">
                                        <div class="card-content">
                                            <span class="card-title">{{ card.Name }}</span>
                                            <span class="card-content" v-html="card.Detail"></span>
                                        </div>
                                        <div class="card-action" v-if="needPlayCard">
                                            <a v-if="!card.Disable || !TurnMe" class="btn"
                                                @mousedown="playCard(card.Index)">å‡ºé€™å¼µ</a>
                                            <a v-else class="btn disabled">å‡ºé€™å¼µ</a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="collection-item">
                                <div class="row">
                                    <div v-for="card in ThrowCard[no]" class="col s12 card grey lighten-2">
                                        <div class="card-content">
                                            <span class="card-title">{{ card.Name }}</span>
                                            <span class="card-content" v-html="card.Detail"></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <!-- å†é¡¯ç¤ºå…¶ä»–äººçš„ç‰Œé¢ -->
                    <div v-for="i in playerCount" v-if="no != i" class="col s12 m6">
                        <ul class="collection with-header">
                            <li class="collection-header">
                                <h5>#{{i}} : {{ PlayerName[i] }} ({{ PlayerPoint[i] }}åˆ†)</h5>
                            </li>
                            <li class="collection-item">
                                <div class="row">
                                    <div class="col s2 card yellow darken-1" v-for="j in CardNum[i]">
                                        <div class="card-content">
                                            <span class="card-title">{{ j }}</span>
                                            <span class="card-content"> </span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="collection-item">
                                <div class="row">
                                    <div v-for="card in ThrowCard[i]" class="col s12 card grey lighten-2">
                                        <div class="card-content">
                                            <span class="card-title">{{ card.Name }}</span>
                                            <span class="card-content" v-html="card.Detail"></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- æˆ¿ä¸»æŒ‰éˆ• -->
                <div v-if="leader && !gameStart">
                    <button class="waves-effect waves-light btn" @mousedown="sendGame">
                        <i class="material-icons">send</i>éŠæˆ²é–‹å§‹
                    </button>
                </div>

                <!-- é¡¯ç¤ºç©å®¶è³‡è¨Š -->
                <div v-if="no !== ''">
                    <div class="divider"></div>
                    <ul class="collection">
                        <li class="collection-item">
                            <i class="material-icons small deep-purple-text text-darken-2">casino</i>
                            <span class="deep-purple-text text-darken-2">#{{ no }} {{ myName }}</span>
                        </li>
                        <li class="collection-item">
                            <i class="material-icons small light-blue-text text-darken-4">person_add</i> æˆ¿ä¸»
                            <i v-if="leader"
                                class="material-icons small light-green-text text-lighten-2">check_circle</i>
                            <i v-else class="material-icons small red-text text-lighten-2">cancel</i>
                        </li>
                        <li class="collection-item">
                            <i class="material-icons small orange-text text-darken-2">fingerprint</i> Token:
                            <span class="orange-text text-darken-2">{{ token }}</span>
                        </li>
                        <li class="collection-item">
                            <i class="material-icons small purple-text text-accent-2">people</i> é€£ç·šäººæ•¸
                            <span v-for="on in online">
                                <i v-if="on" class="material-icons small purple-text text-accent-2">person</i>
                                <i v-else class="material-icons small brown-text text-darken-2">person_outline</i>
                            </span>
                        </li>
                        <li class="collection-item" v-if="qrcode !== ''">
                            <qrcode :value="qrcode" :options="{ width: 200 }"></qrcode>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.0"></script>
    <script src="vue-qrcode.js"></script>
    <script>Vue.component(VueQrcode.name, VueQrcode);</script>
    <script src="criminal.js"></script>
</body>

</html>
